var Module$1=function(){var e=import.meta.url;return function(n){var t,r;(n=void 0!==(n=n||{})?n:{}).ready=new Promise((function(e,n){t=e,r=n}));var l,u={};for(l in n)n.hasOwnProperty(l)&&(u[l]=n[l]);var o="";"undefined"!=typeof document&&document.currentScript&&(o=document.currentScript.src),e&&(o=e),o=0!==o.indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"",console.log.bind(console);var a=console.warn.bind(console);for(l in u)u.hasOwnProperty(l)&&(n[l]=u[l]);u=null;var i,s,c=[];function f(e,n){if(!i){i=new WeakMap;for(var t=0;t<g.length;t++){var r=g.get(t);r&&i.set(r,t)}}if(i.has(e))return i.get(e);var l=function(){if(c.length)return c.pop();try{g.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return g.length-1}();try{g.set(l,e)}catch(t){if(!(t instanceof TypeError))throw t;var u=function(e,n){if("function"==typeof WebAssembly.Function){for(var t={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==n[0]?[]:[t[n[0]]]},l=1;l<n.length;++l)r.parameters.push(t[n[l]]);return new WebAssembly.Function(r,e)}var u=[1,0,1,96],o=n.slice(0,1),a=n.slice(1),i={i:127,j:126,f:125,d:124};for(u.push(a.length),l=0;l<a.length;++l)u.push(i[a[l]]);"v"==o?u.push(0):u=u.concat([1,i[o]]),u[1]=u.length-2;var s=new Uint8Array([0,97,115,109,1,0,0,0].concat(u,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),c=new WebAssembly.Module(s);return new WebAssembly.Instance(c,{e:{f:e}}).exports.f}(e,n);g.set(l,u)}return i.set(e,l),l}function m(e,n){return f(e,n)}"object"!=typeof WebAssembly&&R("no native wasm support detected");var p=!1;function _(e){var t,r=n["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||R("Assertion failed: "+t),r}function b(e,n,t,r,l){var u={string:function(e){var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);F(e,n=K(t),t)}return n},array:function(e){var n=K(e.length);return function(e,n){d.set(e,n)}(e,n),n}};var o=_(e),a=[],i=0;if(r)for(var s=0;s<r.length;s++){var c=u[t[s]];c?(0===i&&(i=P()),a[s]=c(r[s])):a[s]=r[s]}var f=o.apply(null,a);return f=function(e){return"string"===n?v(e):"boolean"===n?Boolean(e):e}(f),0!==i&&x(i),f}var w,d,h,S,M,g,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,n){return e?function(e,n,t){for(var r=n+t,l=n;e[l]&&!(l>=r);)++l;if(l-n>16&&e.subarray&&y)return y.decode(e.subarray(n,l));for(var u="";n<l;){var o=e[n++];if(128&o){var a=63&e[n++];if(192!=(224&o)){var i=63&e[n++];if((o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&e[n++])<65536)u+=String.fromCharCode(o);else{var s=o-65536;u+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else u+=String.fromCharCode((31&o)<<6|a)}else u+=String.fromCharCode(o)}return u}(h,e,n):""}function F(e,n,t){return function(e,n,t,r){if(!(r>0))return 0;for(var l=t,u=t+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(t>=u)break;n[t++]=a}else if(a<=2047){if(t+1>=u)break;n[t++]=192|a>>6,n[t++]=128|63&a}else if(a<=65535){if(t+2>=u)break;n[t++]=224|a>>12,n[t++]=128|a>>6&63,n[t++]=128|63&a}else{if(t+3>=u)break;n[t++]=240|a>>18,n[t++]=128|a>>12&63,n[t++]=128|a>>6&63,n[t++]=128|63&a}}return n[t]=0,t-l}(e,h,n,t)}function C(e){for(var n=0,t=0;t<e.length;++t){var r=e.charCodeAt(t);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++t)),r<=127?++n:n+=r<=2047?2:r<=65535?3:4}return n}function G(e){w=e,n.HEAP8=d=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=S=new Int32Array(e),n.HEAPU8=h=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=M=new Float64Array(e)}var A=[],V=[],E=[];var N=0,L=null;function R(e){a(e+=""),p=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw r(n),n}n.preloadedImages={},n.preloadedAudios={};var H=new URL("wren.wasm",import.meta.url).toString();function B(e){try{throw"both async and sync fetching of the wasm failed"}catch(e){R(e)}}var I={26808:function(e){n._values.push(v(e))},26853:function(e){n._values.push(e)},26882:function(){let e=n._values.length-1;return C(""+n._values[e])+1},26981:function(e){let t=""+n._values.shift();F(t,e,C(t)+1)},27068:function(){return n._values.shift()},27122:function(e){let t=n._values.shift(),r=n._values.shift(),l=n._VMs[e]._resolveModuleFn(t,r);n._values.push(l)},27292:function(e){let t=n._values.shift(),r=n._VMs[e]._loadModuleFn(t);null==r?n._values.push(0):(n._values.push(1),n._values.push(r))},27491:function(e){let t=n._values.shift(),r=n._values.shift(),l=1==n._values.shift(),u=n._values.shift(),o=n._VMs[e]._bindForeignMethod(t,r,l,u);if(null==o)n._values.push(0);else{n._values.push(1),b("setCurrentForeignMethod",null,["number"],[m(o,"vi")])}},27964:function(e){let t=n._values.shift(),r=n._values.shift(),l=n._VMs[e]._bindForeignClass(t,r);if(null==l)n._values.push(0);else{n._values.push(1),b("setClassMethods",null,["number","number"],[m(l.allocate,"vi"),m(l.finalize,"vi")])}},28408:function(e){let t=n._values.shift();n._VMs[e]._write(t)},28477:function(e){let t=n._values.shift(),r=n._values.shift(),l=n._values.shift(),u=n._values.shift();n._VMs[e]._error(t,r,l,u)}};function W(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?g.get(r)():g.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(n)}}var k=[];function T(e,n,t){var r=function(e,n){var t;for(k.length=0,n>>=2;t=h[e++];){var r=t<105;r&&1&n&&n++,k.push(r?M[n++>>1]:S[n]),++n}return k}(n,t);return I[e].apply(null,r)}function U(e){try{return s.grow(e-w.byteLength+65535>>>16),G(s.buffer),1}catch(e){}}var D={f:function e(){return void 0===e.start&&(e.start=Date.now()),1e3*(Date.now()-e.start)|0},b:function(e,n,t){return T(e,n,t)},a:T,c:function(e,n,t){h.copyWithin(e,n,n+t)},d:function(e){var n,t,r=h.length,l=2147483648;if((e>>>=0)>l)return!1;for(var u=1;u<=4;u*=2){var o=r*(1+.2/u);if(o=Math.min(o,e+100663296),U(Math.min(l,((n=Math.max(e,o))%(t=65536)>0&&(n+=t-n%t),n))))return!0}return!1},e:function(e){var n=Date.now()/1e3|0;return e&&(S[e>>2]=n),n}};!function(){var e={a:D};function t(e,t){var r,l=e.exports;n.asm=l,G((s=n.asm.g).buffer),g=n.asm.Y,r=n.asm.h,V.unshift(r),function(e){if(0==--N&&L){var n=L;L=null,n()}}()}function l(e){t(e.instance)}function u(n){return("function"==typeof fetch?fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+H+"'";return e.arrayBuffer()})).catch((function(){return B()})):Promise.resolve().then((function(){return B()}))).then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){a("failed to asynchronously prepare wasm: "+e),R(e)}))}if(N++,n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){return a("Module.instantiateWasm callback failed with error: "+e),!1}("function"!=typeof WebAssembly.instantiateStreaming||H.startsWith("data:application/octet-stream;base64,")||"function"!=typeof fetch?u(l):fetch(H,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(l,(function(e){return a("wasm streaming compile failed: "+e),a("falling back to ArrayBuffer instantiation"),u(l)}))}))).catch(r)}(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.h).apply(null,arguments)},n._wrenCollectGarbage=function(){return(n._wrenCollectGarbage=n.asm.i).apply(null,arguments)},n._wrenInterpret=function(){return(n._wrenInterpret=n.asm.j).apply(null,arguments)},n._wrenGetVersionNumber=function(){return(n._wrenGetVersionNumber=n.asm.k).apply(null,arguments)},n._wrenInitConfiguration=function(){return(n._wrenInitConfiguration=n.asm.l).apply(null,arguments)},n._wrenNewVM=function(){return(n._wrenNewVM=n.asm.m).apply(null,arguments)},n._wrenFreeVM=function(){return(n._wrenFreeVM=n.asm.n).apply(null,arguments)},n._wrenMakeCallHandle=function(){return(n._wrenMakeCallHandle=n.asm.o).apply(null,arguments)},n._wrenCall=function(){return(n._wrenCall=n.asm.p).apply(null,arguments)},n._wrenReleaseHandle=function(){return(n._wrenReleaseHandle=n.asm.q).apply(null,arguments)},n._wrenGetSlotCount=function(){return(n._wrenGetSlotCount=n.asm.r).apply(null,arguments)},n._wrenEnsureSlots=function(){return(n._wrenEnsureSlots=n.asm.s).apply(null,arguments)},n._wrenGetSlotType=function(){return(n._wrenGetSlotType=n.asm.t).apply(null,arguments)},n._wrenGetSlotBool=function(){return(n._wrenGetSlotBool=n.asm.u).apply(null,arguments)},n._wrenGetSlotBytes=function(){return(n._wrenGetSlotBytes=n.asm.v).apply(null,arguments)},n._wrenGetSlotDouble=function(){return(n._wrenGetSlotDouble=n.asm.w).apply(null,arguments)},n._wrenGetSlotForeign=function(){return(n._wrenGetSlotForeign=n.asm.x).apply(null,arguments)},n._wrenGetSlotString=function(){return(n._wrenGetSlotString=n.asm.y).apply(null,arguments)},n._wrenGetSlotHandle=function(){return(n._wrenGetSlotHandle=n.asm.z).apply(null,arguments)},n._wrenSetSlotBool=function(){return(n._wrenSetSlotBool=n.asm.A).apply(null,arguments)},n._wrenSetSlotBytes=function(){return(n._wrenSetSlotBytes=n.asm.B).apply(null,arguments)},n._wrenSetSlotDouble=function(){return(n._wrenSetSlotDouble=n.asm.C).apply(null,arguments)},n._wrenSetSlotNewForeign=function(){return(n._wrenSetSlotNewForeign=n.asm.D).apply(null,arguments)},n._wrenSetSlotNewList=function(){return(n._wrenSetSlotNewList=n.asm.E).apply(null,arguments)},n._wrenSetSlotNewMap=function(){return(n._wrenSetSlotNewMap=n.asm.F).apply(null,arguments)},n._wrenSetSlotNull=function(){return(n._wrenSetSlotNull=n.asm.G).apply(null,arguments)},n._wrenSetSlotString=function(){return(n._wrenSetSlotString=n.asm.H).apply(null,arguments)},n._wrenSetSlotHandle=function(){return(n._wrenSetSlotHandle=n.asm.I).apply(null,arguments)},n._wrenGetListCount=function(){return(n._wrenGetListCount=n.asm.J).apply(null,arguments)},n._wrenGetListElement=function(){return(n._wrenGetListElement=n.asm.K).apply(null,arguments)},n._wrenSetListElement=function(){return(n._wrenSetListElement=n.asm.L).apply(null,arguments)},n._wrenInsertInList=function(){return(n._wrenInsertInList=n.asm.M).apply(null,arguments)},n._wrenGetMapCount=function(){return(n._wrenGetMapCount=n.asm.N).apply(null,arguments)},n._wrenGetMapContainsKey=function(){return(n._wrenGetMapContainsKey=n.asm.O).apply(null,arguments)},n._wrenGetMapValue=function(){return(n._wrenGetMapValue=n.asm.P).apply(null,arguments)},n._wrenSetMapValue=function(){return(n._wrenSetMapValue=n.asm.Q).apply(null,arguments)},n._wrenRemoveMapValue=function(){return(n._wrenRemoveMapValue=n.asm.R).apply(null,arguments)},n._wrenGetVariable=function(){return(n._wrenGetVariable=n.asm.S).apply(null,arguments)},n._wrenHasVariable=function(){return(n._wrenHasVariable=n.asm.T).apply(null,arguments)},n._wrenHasModule=function(){return(n._wrenHasModule=n.asm.U).apply(null,arguments)},n._wrenAbortFiber=function(){return(n._wrenAbortFiber=n.asm.V).apply(null,arguments)},n._wrenGetUserData=function(){return(n._wrenGetUserData=n.asm.W).apply(null,arguments)},n._wrenSetUserData=function(){return(n._wrenSetUserData=n.asm.X).apply(null,arguments)},n._setCurrentForeignMethod=function(){return(n._setCurrentForeignMethod=n.asm.Z).apply(null,arguments)},n._setClassMethods=function(){return(n._setClassMethods=n.asm._).apply(null,arguments)},n._shimNewVM=function(){return(n._shimNewVM=n.asm.$).apply(null,arguments)};var O,P=n.stackSave=function(){return(P=n.stackSave=n.asm.aa).apply(null,arguments)},x=n.stackRestore=function(){return(x=n.stackRestore=n.asm.ba).apply(null,arguments)},K=n.stackAlloc=function(){return(K=n.stackAlloc=n.asm.ca).apply(null,arguments)};function j(e){N>0||(W(A),N>0||O||(O=!0,n.calledRun=!0,p||(W(V),t(n),W(E))))}return n.ccall=b,n.addFunction=m,L=function e(){O||j(),O||(L=e)},n.run=j,j(),n.ready}}();let Module;async function load(){Module||(Module=await Module$1(),Module._VMs={},Module._values=[])}function getVersionNumber(){return Module.ccall("wrenGetVersionNumber","number",[],[])}let ErrorType={COMPILE:0,RUNTIME:1,STACK_TRACE:2},Result={SUCCESS:0,COMPILE_ERROR:1,RUNTIME_ERROR:2},Type={BOOL:0,NUM:1,FOREIGN:2,LIST:3,MAP:4,NULL:5,STRING:6,UNKNOWN:7};class VM{constructor(e){let n={resolveModuleFn:defaultResolveModuleFn,loadModuleFn:defaultLoadModuleFn,bindForeignMethodFn:defaultBindForeignMethodFn,bindForeignClassFn:defaultBindForeignClassFn,writeFn:defaultWriteFn,errorFn:defaultErrorFn};this.config=Object.assign(n,e),this._pointer=Module.ccall("shimNewVM","number",[],[]),Module._VMs[this._pointer]=this,this._foreignClasses={}}_resolveModuleFn(e,n){return this.config.resolveModuleFn(e,n)}_loadModuleFn(e){return this.config.loadModuleFn(e)}_bindForeignMethod(e,n,t,r){let l=this.config.bindForeignMethodFn(e,n,t,r),u=this;return function(e){l(u)}}_bindForeignClass(e,n){var t=this.config.bindForeignClassFn(e,n);let r=this;return{allocate:function(){t.allocate(r)},finalize:function(){t.finalize(r);let e=Module.ccall("wrenGetSlotForeign","number",["number","number"],[r._pointer,0]);delete r._foreignClasses[e]}}}_write(e){this.config.writeFn(e)}_error(e,n,t,r){this.config.errorFn(e,n,t,r)}free(){Module.ccall("wrenFreeVM",null,["number"],[this._pointer]),delete Module._VMs[this._pointer],this._pointer=void 0}collectGarbage(){Module.ccall("wrenCollectGarbage",null,["number"],[this._pointer])}interpret(e,n){return Module.ccall("wrenInterpret","number",["number","string","string"],[this._pointer,e,n])}makeCallHandle(e){return Module.ccall("wrenMakeCallHandle","number",["number","string"],[this._pointer,e])}call(e){return Module.ccall("wrenCall","number",["number","number"],[this._pointer,e])}releaseHandle(e){Module.ccall("wrenReleaseHandle",null,["number","number"],[this._pointer,e])}getSlotCount(){return Module.ccall("wrenGetSlotCount","number",["number"],[this._pointer])}ensureSlots(e){Module.ccall("wrenEnsureSlots",null,["number","number"],[this._pointer,e])}getSlotType(e){return Module.ccall("wrenGetSlotType","number",["number","number"],[this._pointer,e])}getSlotBool(e){return Module.ccall("wrenGetSlotBool","boolean",["number","number"],[this._pointer,e])}getSlotBytes(e,n){return Module.ccall("wrenGetSlotBytes","string",["number","number","number"],[this._pointer,e,n])}getSlotDouble(e){return Module.ccall("wrenGetSlotDouble","number",["number","number"],[this._pointer,e])}getSlotForeign(e){let n=Module.ccall("wrenGetSlotForeign","number",["number","number"],[this._pointer,e]);return this._foreignClasses[n]}getSlotString(e){return Module.ccall("wrenGetSlotString","string",["number","number"],[this._pointer,e])}getSlotHandle(e){return Module.ccall("wrenGetSlotHandle","number",["number","number"],[this._pointer,e])}setSlotBool(e,n){Module.ccall("wrenSetSlotBool",null,["number","number","boolean"],[this._pointer,e,n])}setSlotBytes(e,n,t){Module.ccall("wrenSetSlotBytes",null,["number","number","string","number"],[this._pointer,e,n,t])}setSlotDouble(e,n){Module.ccall("wrenSetSlotDouble",null,["number","number","number"],[this._pointer,e,n])}setSlotNewForeign(e,n,t){let r=Module.ccall("wrenSetSlotNewForeign","number",["number","number","number","number"],[this._pointer,e,n,0]);return this._foreignClasses[r]=t,t}setSlotNewList(e){Module.ccall("wrenSetSlotNewList",null,["number","number"],[this._pointer,e])}setSlotNewMap(e){Module.ccall("wrenSetSlotNewMap",null,["number","number"],[this._pointer,e])}setSlotNull(e){Module.ccall("wrenSetSlotNull",null,["number","number"],[this._pointer,e])}setSlotString(e,n){Module.ccall("wrenSetSlotString",null,["number","number","string"],[this._pointer,e,n])}setSlotHandle(e,n){Module.ccall("wrenSetSlotHandle",null,["number","number","number"],[this._pointer,e,n])}getListCount(e){return Module.ccall("wrenGetListCount","number",["number","number"],[this._pointer,e])}getListElement(e,n,t){Module.ccall("wrenGetListElement",null,["number","number","number","number"],[this._pointer,e,n,t])}setListElement(e,n,t){Module.ccall("wrenSetListElement",null,["number","number","number","number"],[this._pointer,e,n,t])}insertInList(e,n,t){Module.ccall("wrenInsertInList",null,["number","number","number","number"],[this._pointer,e,n,t])}getMapCount(e){return Module.ccall("wrenGetMapCount","number",["number","number"],[this._pointer,e])}getMapContainsKey(e,n){return Module.ccall("wrenGetMapContainsKey","boolean",["number","number","number"],[this._pointer,e,n])}getMapValue(e,n,t){Module.ccall("wrenGetMapValue",null,["number","number","number","number"],[this._pointer,e,n,t])}setMapValue(e,n,t){Module.ccall("wrenSetMapValue",null,["number","number","number","number"],[this._pointer,e,n,t])}removeMapValue(e,n,t){Module.ccall("wrenRemoveMapValue",null,["number","number","number","number"],[this._pointer,e,n,t])}getVariable(e,n,t){Module.ccall("wrenGetVariable",null,["number","string","string","number"],[this._pointer,e,n,t])}hasVariable(e,n){return Module.ccall("wrenHasVariable","boolean",["number","string","string"],[this._pointer,e,n])}hasModule(e){return Module.ccall("wrenHasModule","boolean",["number","string"],[this._pointer,e])}abortFiber(e){Module.ccall("wrenAbortFiber",null,["number","number"],[this._pointer,e])}}function defaultResolveModuleFn(e,n){return n}function defaultLoadModuleFn(e){return null}function defaultBindForeignMethodFn(e,n,t,r){return function(e){}}function defaultBindForeignClassFn(e,n){return null}function defaultWriteFn(e){console.log("WRENJS: "+e)}function defaultErrorFn(e,n,t,r){let l="WRENJS: ";0===e?l+="["+n+" line "+t+"] [Error] "+r+"\n":1===e?l+="["+n+" line "+t+"] in "+r+"\n":2===e&&(l+="[Runtime Error] "+r+"\n"),console.error(l)}export{ErrorType,Result,Type,VM,getVersionNumber,load};