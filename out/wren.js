var Module$1=function(){var e=import.meta.url;return function(n){var r,t;function l(e){if(!e)return 0;var n=function(e){for(var n=0,r=0;r<e.length;++r){var t=e.charCodeAt(r);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++r)),t<=127?++n:n+=t<=2047?2:t<=65535?3:4}return n}(e)+1,r=P(n);return v(e,r,n),r}(n=void 0!==(n=n||{})?n:{}).ready=new Promise((function(e,n){r=e,t=n}));var u,o={};for(u in n)n.hasOwnProperty(u)&&(o[u]=n[u]);var a="";"undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),e&&(a=e),a=0!==a.indexOf("blob:")?a.substr(0,a.lastIndexOf("/")+1):"",console.log.bind(console);var i=console.warn.bind(console);for(u in o)o.hasOwnProperty(u)&&(n[u]=o[u]);o=null;var s,c,f=[];function m(e,n){if(!s){s=new WeakMap;for(var r=0;r<M.length;r++){var t=M.get(r);t&&s.set(t,r)}}if(s.has(e))return s.get(e);var l=function(){if(f.length)return f.pop();try{M.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return M.length-1}();try{M.set(l,e)}catch(r){if(!(r instanceof TypeError))throw r;var u=function(e,n){if("function"==typeof WebAssembly.Function){for(var r={i:"i32",j:"i64",f:"f32",d:"f64"},t={parameters:[],results:"v"==n[0]?[]:[r[n[0]]]},l=1;l<n.length;++l)t.parameters.push(r[n[l]]);return new WebAssembly.Function(t,e)}var u=[1,0,1,96],o=n.slice(0,1),a=n.slice(1),i={i:127,j:126,f:125,d:124};for(u.push(a.length),l=0;l<a.length;++l)u.push(i[a[l]]);"v"==o?u.push(0):u=u.concat([1,i[o]]),u[1]=u.length-2;var s=new Uint8Array([0,97,115,109,1,0,0,0].concat(u,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),c=new WebAssembly.Module(s);return new WebAssembly.Instance(c,{e:{f:e}}).exports.f}(e,n);M.set(l,u)}return s.set(e,l),l}"object"!=typeof WebAssembly&&N("no native wasm support detected");var p=!1;function b(e){var r,t=n["_"+e];return r="Cannot call unknown function "+e+", make sure it is exported",t||N("Assertion failed: "+r),t}var w,d,_,h,S,M,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function g(e,n){return e?function(e,n,r){for(var t=n+r,l=n;e[l]&&!(l>=t);)++l;if(l-n>16&&e.subarray&&y)return y.decode(e.subarray(n,l));for(var u="";n<l;){var o=e[n++];if(128&o){var a=63&e[n++];if(192!=(224&o)){var i=63&e[n++];if((o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&e[n++])<65536)u+=String.fromCharCode(o);else{var s=o-65536;u+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else u+=String.fromCharCode((31&o)<<6|a)}else u+=String.fromCharCode(o)}return u}(_,e,n):""}function v(e,n,r){return function(e,n,r,t){if(!(t>0))return 0;for(var l=r,u=r+t-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=u)break;n[r++]=a}else if(a<=2047){if(r+1>=u)break;n[r++]=192|a>>6,n[r++]=128|63&a}else if(a<=65535){if(r+2>=u)break;n[r++]=224|a>>12,n[r++]=128|a>>6&63,n[r++]=128|63&a}else{if(r+3>=u)break;n[r++]=240|a>>18,n[r++]=128|a>>12&63,n[r++]=128|a>>6&63,n[r++]=128|63&a}}return n[r]=0,r-l}(e,_,n,r)}function F(e){w=e,n.HEAP8=d=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=h=new Int32Array(e),n.HEAPU8=_=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=S=new Float64Array(e)}var G=[],C=[],A=[];var V=0,E=null;function N(e){i(e+=""),p=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw t(n),n}n.preloadedImages={},n.preloadedAudios={};var L=new URL("wren.wasm",import.meta.url).toString();function H(e){try{throw"both async and sync fetching of the wasm failed"}catch(e){N(e)}}var R={26808:function(e,r,t){return l(n._VMs[e]._resolveModule(g(r),g(t)))},26903:function(e,r){return l(n._VMs[e]._loadModule(g(r)))},26976:function(e,r,t,l,u){return n._VMs[e]._bindForeignMethod(g(r),g(t),1===l,g(u))},27090:function(e,r,t,l){return n._VMs[e]._bindForeignClass(g(r),g(t),l)},27179:function(e,r){n._VMs[e]._write(g(r))},27225:function(e,r,t,l,u){n._VMs[e]._error(r,g(t),l,g(u))}};function B(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var t=r.func;"number"==typeof t?void 0===r.arg?M.get(t)():M.get(t)(r.arg):t(void 0===r.arg?null:r.arg)}else r(n)}}var I=[];function W(e){try{return c.grow(e-w.byteLength+65535>>>16),F(c.buffer),1}catch(e){}}var U={e:function e(){return void 0===e.start&&(e.start=Date.now()),1e3*(Date.now()-e.start)|0},a:function(e,n,r){var t=function(e,n){var r;for(I.length=0,n>>=2;r=_[e++];){var t=r<105;t&&1&n&&n++,I.push(t?S[n++>>1]:h[n]),++n}return I}(n,r);return R[e].apply(null,t)},b:function(e,n,r){_.copyWithin(e,n,n+r)},c:function(e){var n,r,t=_.length,l=2147483648;if((e>>>=0)>l)return!1;for(var u=1;u<=4;u*=2){var o=t*(1+.2/u);if(o=Math.min(o,e+100663296),W(Math.min(l,((n=Math.max(e,o))%(r=65536)>0&&(n+=r-n%r),n))))return!0}return!1},d:function(e){var n=Date.now()/1e3|0;return e&&(h[e>>2]=n),n}};!function(){var e={a:U};function r(e,r){var t,l=e.exports;n.asm=l,F((c=n.asm.f).buffer),M=n.asm.X,t=n.asm.g,C.unshift(t),function(e){if(0==--V&&E){var n=E;E=null,n()}}()}function l(e){r(e.instance)}function u(n){return("function"==typeof fetch?fetch(L,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()})).catch((function(){return H()})):Promise.resolve().then((function(){return H()}))).then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){i("failed to asynchronously prepare wasm: "+e),N(e)}))}if(V++,n.instantiateWasm)try{return n.instantiateWasm(e,r)}catch(e){return i("Module.instantiateWasm callback failed with error: "+e),!1}("function"!=typeof WebAssembly.instantiateStreaming||L.startsWith("data:application/octet-stream;base64,")||"function"!=typeof fetch?u(l):fetch(L,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(l,(function(e){return i("wasm streaming compile failed: "+e),i("falling back to ArrayBuffer instantiation"),u(l)}))}))).catch(t)}(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.g).apply(null,arguments)},n._wrenCollectGarbage=function(){return(n._wrenCollectGarbage=n.asm.h).apply(null,arguments)},n._wrenInterpret=function(){return(n._wrenInterpret=n.asm.i).apply(null,arguments)},n._wrenGetVersionNumber=function(){return(n._wrenGetVersionNumber=n.asm.j).apply(null,arguments)},n._wrenInitConfiguration=function(){return(n._wrenInitConfiguration=n.asm.k).apply(null,arguments)},n._wrenNewVM=function(){return(n._wrenNewVM=n.asm.l).apply(null,arguments)},n._wrenFreeVM=function(){return(n._wrenFreeVM=n.asm.m).apply(null,arguments)},n._wrenMakeCallHandle=function(){return(n._wrenMakeCallHandle=n.asm.n).apply(null,arguments)},n._wrenCall=function(){return(n._wrenCall=n.asm.o).apply(null,arguments)},n._wrenReleaseHandle=function(){return(n._wrenReleaseHandle=n.asm.p).apply(null,arguments)},n._wrenGetSlotCount=function(){return(n._wrenGetSlotCount=n.asm.q).apply(null,arguments)},n._wrenEnsureSlots=function(){return(n._wrenEnsureSlots=n.asm.r).apply(null,arguments)},n._wrenGetSlotType=function(){return(n._wrenGetSlotType=n.asm.s).apply(null,arguments)},n._wrenGetSlotBool=function(){return(n._wrenGetSlotBool=n.asm.t).apply(null,arguments)},n._wrenGetSlotBytes=function(){return(n._wrenGetSlotBytes=n.asm.u).apply(null,arguments)},n._wrenGetSlotDouble=function(){return(n._wrenGetSlotDouble=n.asm.v).apply(null,arguments)},n._wrenGetSlotForeign=function(){return(n._wrenGetSlotForeign=n.asm.w).apply(null,arguments)},n._wrenGetSlotString=function(){return(n._wrenGetSlotString=n.asm.x).apply(null,arguments)},n._wrenGetSlotHandle=function(){return(n._wrenGetSlotHandle=n.asm.y).apply(null,arguments)},n._wrenSetSlotBool=function(){return(n._wrenSetSlotBool=n.asm.z).apply(null,arguments)},n._wrenSetSlotBytes=function(){return(n._wrenSetSlotBytes=n.asm.A).apply(null,arguments)},n._wrenSetSlotDouble=function(){return(n._wrenSetSlotDouble=n.asm.B).apply(null,arguments)},n._wrenSetSlotNewForeign=function(){return(n._wrenSetSlotNewForeign=n.asm.C).apply(null,arguments)},n._wrenSetSlotNewList=function(){return(n._wrenSetSlotNewList=n.asm.D).apply(null,arguments)},n._wrenSetSlotNewMap=function(){return(n._wrenSetSlotNewMap=n.asm.E).apply(null,arguments)},n._wrenSetSlotNull=function(){return(n._wrenSetSlotNull=n.asm.F).apply(null,arguments)},n._wrenSetSlotString=function(){return(n._wrenSetSlotString=n.asm.G).apply(null,arguments)},n._wrenSetSlotHandle=function(){return(n._wrenSetSlotHandle=n.asm.H).apply(null,arguments)},n._wrenGetListCount=function(){return(n._wrenGetListCount=n.asm.I).apply(null,arguments)},n._wrenGetListElement=function(){return(n._wrenGetListElement=n.asm.J).apply(null,arguments)},n._wrenSetListElement=function(){return(n._wrenSetListElement=n.asm.K).apply(null,arguments)},n._wrenInsertInList=function(){return(n._wrenInsertInList=n.asm.L).apply(null,arguments)},n._wrenGetMapCount=function(){return(n._wrenGetMapCount=n.asm.M).apply(null,arguments)},n._wrenGetMapContainsKey=function(){return(n._wrenGetMapContainsKey=n.asm.N).apply(null,arguments)},n._wrenGetMapValue=function(){return(n._wrenGetMapValue=n.asm.O).apply(null,arguments)},n._wrenSetMapValue=function(){return(n._wrenSetMapValue=n.asm.P).apply(null,arguments)},n._wrenRemoveMapValue=function(){return(n._wrenRemoveMapValue=n.asm.Q).apply(null,arguments)},n._wrenGetVariable=function(){return(n._wrenGetVariable=n.asm.R).apply(null,arguments)},n._wrenHasVariable=function(){return(n._wrenHasVariable=n.asm.S).apply(null,arguments)},n._wrenHasModule=function(){return(n._wrenHasModule=n.asm.T).apply(null,arguments)},n._wrenAbortFiber=function(){return(n._wrenAbortFiber=n.asm.U).apply(null,arguments)},n._wrenGetUserData=function(){return(n._wrenGetUserData=n.asm.V).apply(null,arguments)},n._wrenSetUserData=function(){return(n._wrenSetUserData=n.asm.W).apply(null,arguments)},n._shimNewVM=function(){return(n._shimNewVM=n.asm.Y).apply(null,arguments)};var k,T=n.stackSave=function(){return(T=n.stackSave=n.asm.Z).apply(null,arguments)},D=n.stackRestore=function(){return(D=n.stackRestore=n.asm._).apply(null,arguments)},O=n.stackAlloc=function(){return(O=n.stackAlloc=n.asm.$).apply(null,arguments)},P=n._malloc=function(){return(P=n._malloc=n.asm.aa).apply(null,arguments)};function x(e){V>0||(B(G),V>0||k||(k=!0,n.calledRun=!0,p||(B(C),r(n),B(A))))}return n.ccall=function(e,n,r,t,l){var u={string:function(e){var n=0;if(null!=e&&0!==e){var r=1+(e.length<<2);v(e,n=O(r),r)}return n},array:function(e){var n=O(e.length);return function(e,n){d.set(e,n)}(e,n),n}},o=b(e),a=[],i=0;if(t)for(var s=0;s<t.length;s++){var c=u[r[s]];c?(0===i&&(i=T()),a[s]=c(t[s])):a[s]=t[s]}var f=o.apply(null,a);return f=function(e){return"string"===n?g(e):"boolean"===n?Boolean(e):e}(f),0!==i&&D(i),f},n.addFunction=function(e,n){return m(e,n)},E=function e(){k||x(),k||(E=e)},n.run=x,x(),n.ready}}();let Module;async function load(){Module||(Module=await Module$1(),Module._VMs={},Module._values=[])}function getVersionNumber(){return Module.ccall("wrenGetVersionNumber","number",[],[])}let ErrorType={COMPILE:0,RUNTIME:1,STACK_TRACE:2},Result={SUCCESS:0,COMPILE_ERROR:1,RUNTIME_ERROR:2},Type={BOOL:0,NUM:1,FOREIGN:2,LIST:3,MAP:4,NULL:5,STRING:6,UNKNOWN:7};class VM{constructor(e){let n={resolveModuleFn:defaultResolveModuleFn,loadModuleFn:defaultLoadModuleFn,bindForeignMethodFn:defaultBindForeignMethodFn,bindForeignClassFn:defaultBindForeignClassFn,writeFn:defaultWriteFn,errorFn:defaultErrorFn};this.config=Object.assign(n,e),this._pointer=Module.ccall("shimNewVM","number",[],[]),Module._VMs[this._pointer]=this,this._wb=""}get Module(){return Module}get heap(){return Module.HEAP8.buffer}_resolveModule(e,n){return this.config.resolveModuleFn(e,n)}_loadModule(e){return this.config.loadModuleFn(e)}_bindForeignMethod(e,n,r,t){let l=this.config.bindForeignMethodFn(e,n,r,t);return l?Module.addFunction(l.bind(null,this),"vi"):0}_bindForeignClass(e,n,r){let t=this.config.bindForeignClassFn(e,n);if(t){let e=t.allocate,n=t.finalize,l=new Uint32Array(this.heap,r);e&&(l[0]=Module.addFunction(e.bind(null,this),"vi")),n&&(l[1]=Module.addFunction(n,"vi"))}}_write(e){let n,r=0;for(;(n=e.indexOf("\n",r))>=0;){let t=this._wb+e.slice(r,n);this._wb="",r=n+1,this.config.writeFn(t)}this._wb+=e.slice(r)}_error(e,n,r,t){this.config.errorFn(e,n,r,t)}free(){Module.ccall("wrenFreeVM",null,["number"],[this._pointer]),delete Module._VMs[this._pointer],this._pointer=void 0}collectGarbage(){Module.ccall("wrenCollectGarbage",null,["number"],[this._pointer])}interpret(e,n){return Module.ccall("wrenInterpret","number",["number","string","string"],[this._pointer,e,n])}makeCallHandle(e){return Module.ccall("wrenMakeCallHandle","number",["number","string"],[this._pointer,e])}call(e){return Module.ccall("wrenCall","number",["number","number"],[this._pointer,e])}releaseHandle(e){Module.ccall("wrenReleaseHandle",null,["number","number"],[this._pointer,e])}getSlotCount(){return Module.ccall("wrenGetSlotCount","number",["number"],[this._pointer])}ensureSlots(e){Module.ccall("wrenEnsureSlots",null,["number","number"],[this._pointer,e])}getSlotType(e){return Module.ccall("wrenGetSlotType","number",["number","number"],[this._pointer,e])}getSlotBool(e){return Module.ccall("wrenGetSlotBool","boolean",["number","number"],[this._pointer,e])}getSlotBytes(e,n){let r=Module.ccall("wrenGetSlotBytes","number",["number","number","number"],[this._pointer,e,n]);return new Uint8Array(this.heap,r,n)}getSlotDouble(e){return Module.ccall("wrenGetSlotDouble","number",["number","number"],[this._pointer,e])}getSlotForeign(e){return Module.ccall("wrenGetSlotForeign","number",["number","number"],[this._pointer,e])}getSlotString(e){return Module.ccall("wrenGetSlotString","string",["number","number"],[this._pointer,e])}getSlotHandle(e){return Module.ccall("wrenGetSlotHandle","number",["number","number"],[this._pointer,e])}setSlotBool(e,n){Module.ccall("wrenSetSlotBool",null,["number","number","boolean"],[this._pointer,e,n])}setSlotBytes(e,n,r){Module.ccall("wrenSetSlotBytes",null,["number","number","array","number"],[this._pointer,e,n,r])}setSlotDouble(e,n){Module.ccall("wrenSetSlotDouble",null,["number","number","number"],[this._pointer,e,n])}setSlotNewForeign(e,n,r){return Module.ccall("wrenSetSlotNewForeign","number",["number","number","number","number"],[this._pointer,e,n,r])}setSlotNewList(e){Module.ccall("wrenSetSlotNewList",null,["number","number"],[this._pointer,e])}setSlotNewMap(e){Module.ccall("wrenSetSlotNewMap",null,["number","number"],[this._pointer,e])}setSlotNull(e){Module.ccall("wrenSetSlotNull",null,["number","number"],[this._pointer,e])}setSlotString(e,n){Module.ccall("wrenSetSlotString",null,["number","number","string"],[this._pointer,e,n])}setSlotHandle(e,n){Module.ccall("wrenSetSlotHandle",null,["number","number","number"],[this._pointer,e,n])}getListCount(e){return Module.ccall("wrenGetListCount","number",["number","number"],[this._pointer,e])}getListElement(e,n,r){Module.ccall("wrenGetListElement",null,["number","number","number","number"],[this._pointer,e,n,r])}setListElement(e,n,r){Module.ccall("wrenSetListElement",null,["number","number","number","number"],[this._pointer,e,n,r])}insertInList(e,n,r){Module.ccall("wrenInsertInList",null,["number","number","number","number"],[this._pointer,e,n,r])}getMapCount(e){return Module.ccall("wrenGetMapCount","number",["number","number"],[this._pointer,e])}getMapContainsKey(e,n){return Module.ccall("wrenGetMapContainsKey","boolean",["number","number","number"],[this._pointer,e,n])}getMapValue(e,n,r){Module.ccall("wrenGetMapValue",null,["number","number","number","number"],[this._pointer,e,n,r])}setMapValue(e,n,r){Module.ccall("wrenSetMapValue",null,["number","number","number","number"],[this._pointer,e,n,r])}removeMapValue(e,n,r){Module.ccall("wrenRemoveMapValue",null,["number","number","number","number"],[this._pointer,e,n,r])}getVariable(e,n,r){Module.ccall("wrenGetVariable",null,["number","string","string","number"],[this._pointer,e,n,r])}hasVariable(e,n){return Module.ccall("wrenHasVariable","boolean",["number","string","string"],[this._pointer,e,n])}hasModule(e){return Module.ccall("wrenHasModule","boolean",["number","string"],[this._pointer,e])}abortFiber(e){Module.ccall("wrenAbortFiber",null,["number","number"],[this._pointer,e])}}function defaultResolveModuleFn(e,n){return n}function defaultLoadModuleFn(e){return null}function defaultBindForeignMethodFn(e,n,r,t){return function(e){}}function defaultBindForeignClassFn(e,n){return null}function defaultWriteFn(e){console.log("WREN: "+e)}function defaultErrorFn(e,n,r,t){let l="WREN: ";0===e?l+="["+n+" line "+r+"] [Error] "+t+"\n":1===e?l+="["+n+" line "+r+"] in "+t+"\n":2===e&&(l+="[Runtime Error] "+t+"\n"),console.error(l)}export{ErrorType,Result,Type,VM,getVersionNumber,load};